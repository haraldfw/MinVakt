<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      th:include="layout :: mainLayout">

<head th:fragment="header">
    <script src="/js/useraccount.js"></script>
    <script src="/js/jsonSubmit.js"></script>
    <script src="/js/imageUpload.js"></script>
    <script src="/js/libs/zxcvbn.min.js"></script>
</head>

<body>

<div th:fragment="content">
    <div class="account-box">
        <h3 id="account-title">Profil</h3>
        <table class="table table-striped">
            <tr>
                <th>Navn</th>
                <td class="input-cell">
                    <input type="text" th:value="${user.firstName + ' ' + user.lastName}"
                           disabled="disabled"/>
                </td>
                <td></td>
            </tr>
            <tr>
                <th>E-post</th>
                <td class="input-cell">
                    <input type="email" th:value="${user.email}" disabled="disabled"/>
                </td>
                <td></td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td class="input-cell">
                    <input class="sbmts" type="text" value="Vanvikan 7125(NIY)" disabled="disabled"/>
                </td>
                <td><span class="glyphicon glyphicon-edit"></span></td>
            </tr>
            <tr>
                <th>Mobil</th>
                <td class="input-cell">
                    <input class="sbmts" type="text" th:value="${user.phonenumber}" disabled="disabled"/>
                </td>
                <td><span class="glyphicon glyphicon-edit"></span></td>
            </tr>
            <tr>
                <th>Passord</th>
                <td>
                    <div id="new-pwd-box">
                        <form action="/api/password/change" method="post" class="sbmts"
                              onsubmit="return jsonSubmitFns(this, success, failure)">
                            <input class="pwd-input" type="password" name="old_password"
                                   placeholder="Nåværende passord"/>
                            <input id="new-pwd" class="pwd-input" type="password" pattern=".{8,}" name="new_password"
                                   placeholder="Nytt passord"/>
                            <meter max="4" id="password-strength-meter" value="0"></meter>
                            <input id="rpt-pwd" class="pwd-input" type="password" pattern=".{8,}"
                                   placeholder="Gjenta nytt passord"/>
                            <div id="incorrect-pwd" class="alert alert-danger">
                                <p><strong>Passordene er ikke like</strong></p>
                            </div>
                            <button type="submit" id="save-pwd-btn"
                                    class="btn btn-primary pull-right">Lagre
                            </button>
                        </form>
                    </div>
                </td>
                <td><span id="edit-pwd" class="glyphicon glyphicon-edit"></span></td>
            </tr>
            <tr>
                <th>Timer denne uken</th>
                <td>
                </td>
            </tr>
        </table>
    </div>
    <table class="table table-striped">
        <tr>
            <td>
                <img src=""
                     th:if="${navbar.profileImageB64 != null}"
                     th:src="${'data:' + navbar.profileImageType + ';base64,' + navbar.profileImageB64}"
                     height="256" width="256" style="margin: auto 0;"/>
                <img th:if="${navbar.profileImageB64 == null}" src="/images/profile.png"
                     height="256" width="256" style="margin: auto 0;" />
            </td>
            <td>
                <form onsubmit="return uploadImage(this, '/user/profile', 'imgUpload')"
                      action="/api/images/upload" method="post">
                    <input class="form-control" type="file" id="imgUpload"/>
                    <input name="b64_content" type="text" hidden="hidden"/>
                    <input name="content_type" type="text" hidden="hidden"/>
                    <input type="submit" value="Last opp"/>
                </form>
            </td>
        </tr>
    </table>
</div>
</body>
</html>